http://www.gameru.net/forum/index.php?showtopic=23443&view=findpost&p=1598041

Вопрос есть. Ты никогда не сталкивался с вопросом, как можно в игре вывести данные из ПДА на форум?
Суть: человек поиграл, у него статистика в ПДА - сделать так, чтобы эта статистика могла в его профиль перейти, скажем скачиванием чего-то или нажатием.


112. Андрей, глянь suvorotka. Там не работает алкоголь = -1.0 Раньше работало, никто ее не правил. Что-то в движке.
winsor: добавить функционал 

Андрей, будет время - пофикси пожалуйста окно подсказки в GUI (hint), а то, если закрыть окно при отображающемся хинте, он потом вообще работать перестаёт в любых гуях.

И еще, можно на карте отмечать места укрытий от выбросов? Давно ведь напрашивается эта фишка, которая в других модах уже несколько лет есть. 

А можно полоску состояния используемого оружия вывести на HUD? 
Я такое видел в Инферно. Т.е. если держишь в руках оружие, то на HUD есть полоска его состояния. 
Типа как здесь по иконкой патронов http://gsc-stalkers..../_ld/7/708.jpg 
Положения на HUD можно потом регулировать, а так бы сам вывод сделать. Думаю это так же как и полоска радиации, они ведь обе в инвентаре выводятся. 
В идеале еще сделать вывод пси-здоровья, если оно меньше 100%. Т.е. пока никто не зомбирует ГГ, то полоска не выводится, а как только пси-здоровье меньше 100%, то выводим полоску, чтобы видеть состояние мозгов.


Все помнят поломку пда после х-18 - перестают открываться все интерфейсные окна, включая диалоговое окно, инвентарь, обыск нычек. 
А надо бы, чтоб отключалось только пда, точнее его вкладки - таски, журнал, контакты, карта, справка и прочее.
Нельзя в движке сделать какие-нибудь функции на включение/отключение опред интерфейсов?
В данном квесте надо, чтоб именно пда не работал, но в будущем может пригодиться отключение других интерфейсных окон.
было бы удобно очень - перечислил в скрипте ,что отключить - то и не работает.
И поломку сюжетную выправим, будет логично всё.
Я конечно не знаю, может и скриптом всё это можно сделать и сейчас, но раз солянщики всё вырубили, то наверное что-то мешало сделать нормально всё сразу.


107. если ствол/броня убиты напр. 80% подсвечивать зелёным, 50-80 серым, <50% красным, 0% - кислотно красным или салатовым, имеется виду ободок в инвентаре или если возможно тогда значком
- вот это - хорошая идея. Возьми а основу шкалу цвета
[main_ingame_indicators_thresholds]
radiation       = 0.1,0.25,0.4,0.55,0.7
wounds          = 0.01,0.2,0.4,0.6,0.8
jammed          = 0.5,0.6,0.7,0.8,0.9
starvation        = 0.5,0.6,0.7,0.8,0.9
fatigue         = 0.3,0.6,0.7,0.8,0.9
и используй именно тот цвет, который выводится на худе в данной иконке. Думаю будет отлично. 


В желаниях увидел сегодня, да и сам давно это сделать хотел: Андрей, сделай пожалуйста в game_object функцию set_character_name, хотя бы чисто для актера.

Слово ВСЕ - относится не ко всему инвентарю, а к ОТДЕЛЬНОЙ ГРУППЕ стволов,которые лежат под одной иконкой в инвентаре. Это было бы очень удобно, ибо в новый рюкзак не положить с обвесами и с патронами.Вот игрок и кликает, готовя хабар к перекладке. 

 100. Юбилейная цифра и особое пожелание))) на  светлое будущее) Андрей, запиши себе куда-нить в самый конец пожеланий)))
Костры. Вот сделать бы их так, как сделал бы однозначно я. Не 5 секций в алспауне, а одна. На базе аномалии. Плюсом к ней визуал (опционально), lamp, и рестриктор, куда никто не заходит. А еще - 5-я вещь - смарт с логикой кампера. И это все в одном. Костер горит постоянно, а смарт открываем по поршню. И пусть неписи сидят, где им вздумается. Было бы здорово) Хотя это довольно непросто, однако)

 
 102: Мерцающий сказал:
Кстати, а можно в движке сделать так, чтобы лог содержал игровой набор, который отображается в главном меню (версию движка и мода)? 
Сделай это плиз) Это будет очень полезно для будущего сопровождения, чтобы контролировать сборку. Выводи это непосредственно перед логом вылета. Сборку сможешь прочесть из конфигов?
local txt = meceniy_utils.read_mod_ver("txt")
Думаю лучше ее в _G тогда перенести для логического удобства. Вот так: _G.mod_ver. Переноси и шли правки) Параметр выкинь нафиг, просто убей этот иф:
if opt == "txt" then

101. Андрей, может вынесем в опиции установку угла обзора? device().fov который. Это многие просили и это будет действительно удобно для широкоформатных моников. это тот fov, который ты писал выше, для зума, который сейчас забит на 67.5.
сонсольная команда vid_fov. Без параметров возвращает текущее значение. И ограничь ее сверху до 120, больше думаю точно не надо.


 
 Андрей, об этом писал еще маландриус в далеком 2009... вот ты прибеги к сидору, замени в cycle_task вот эту секцию:
[000017]
type = monster_part
condlist = {+esc_serious_talk}
target = part_psevdodog_tail
reward_item = ammo_12x70_kart
reward_info = info_amk_recipt_pra_grandmother_glassbeards
reward_dialog = trader_beads_1, trader_beads_2, trader_beads_3
и выполни этот таск, заспавнив себе хвост. А затем верни конфиг обратно как было, выполни через test2 вот это:
_G.cycle_task = nil _G.Cycle_Task = nil _G.Cycle_Task = cycle_task.CCycleTask()
- обнулив состояние ЦЗ, и опять выполни ТОТ ЖЕ ТАСК,
И ты увидишь, что диалог опять остался старый. Хотя в скрипте стоит проверка, что поршень уже выдан и повторно не выдавать, и допфраз в диалоге быть не должно. А они будут.
а теперь сделай СЛ, опять повтори то же самое. - Диалог без изменений.
 А теперь - ВЫЙДИ ИЗ ИГРЫ, и загрузи последний сейв. И ОПЯТЬ выполни тот же таск. Какой будет диалог?
 Надо пофиксить.
 
Я надеюсь, про переменную, которая увеличивает высоту прыжка актора и артефакт/артефакты, 
дающие прибавку к стандартному прыжку (7.6 по дефолту) не забыли? 
На старом движке сделать такой артефакт не удалось ни под каким соусом. 
А здесь, при модернизации движка, по-моему, сам Бог велел ввести такую фишку 
(учитывая, СКОЛЬКО приходится прыгать игроку в течении игры)).Сделать их разряжаемыми, чтобы не были "вечными", 
зарядить их можно будет у Сахарова за немаленькую сумму. Вот и все.
98. Ладно, уболтали) Андрей, делай арт, увеличивающий прыжок. Делай так, чтобы плюсовалась цифра к jump_speed. И поставь в движке ограничение, 
значение не больше 5. То есть всего не больше 12.6. Чтобы хоть чуть-чуть, да думали. просто если больше - то = 12.6 
И эту тему нужно хорошо продумать. Где брать такой арт и по какому квесту. Может, Дима забабахает нужный квест?
Или лучше всего сделать ОДИН арт, и бонус зависит от уровня сложности? Что думаете?

 

Орест, да, так и должно быть - поле ввода в ТЧ не поддерживает кириллицу. Может, Андрей это исправит когда-нибудь. 
Ну, либо можно сделать скриптовый CUIEditBox с поддержкой кириллицы.


Надо еще добавить возможность разрядки оружия в инвентаре трупов, рюкзаках, окнах торговли и т.д. (как в зп).


105. Реализовать разряжение подствольника вместе с самим оружием. Сейчас чтобы разрядить подствольник, его надо сначала включить, потом уже разряжать через инвентарь.
Да это надо сделать обязательно. Еще я бы добавил в инвентарь опцию "разрядить все и снять все обвесы". Для нескольких стволов чтобы работала. Если другие участники не против) Это удобно при подготовке к продаже. 
А лучше вообще заменить опцию "Разрядить" на ту что выше. Ствол реально разряжается ТОЛЬКО для продажи.
 
106. А по продаже части патронов - просто умножать цену на кол-во и делить на размер пачки. И все - чит с продажей неполной пачки закрыт) И больше делать ничего не надо)


95. Раз все молчат, значит согласны с моим предложением)) значит сделай тогда нам:

2. wpn:misfire(true|false) - установка|снятие состояния осечки.
3. добавь обработку параметра condition_dec - увеличение износа в секунду. Это и будет энергия. Просчитывается, если указан в конфиге.
4. обработку параметра condition_dec для артов сделай только когда они на поясе. Остальные просто на апдейте раз в секунду.

6. Если обвес одет на активное оружие, то его износ считается как для оружия - при каждом выстреле. Но для подстволов - только при выстреле из подствола. У них будет свой condition_shot_dec.
пока это все) 

6. При взятии броника из нычки сбивается визуал гг в виде от третьего лица. Сбрасывается на куртку новичка - без броника. Фиксится скриптово так:
-- фикс переодевания гг при взятии броника
if obj:clsid() == clsid.equ_stalker_s then
local outfit = db.actor:get_current_outfit()
if outfit and outfit:id() ~= obj:id() then
db.actor:transfer_item(outfit, db.actor)
end
end
надо бы просто поправить.

97. При спавне предметов в трупы монстров они пропадают при СЛ. Пофиксено так:
-- Фикс пропадания доспавненного предмета при сейв/лоаде
level.client_spawn_manager():add(item.id, -1, fix_spawn_item_in_inv, npc)  -- Калбек на выход item в онлайн
function fix_spawn_item_in_inv(npc, id, item)
    npc:transfer_item(item, npc)
end
 
то есть в обоих случаях пысы неправильно прописали парент или что-то еще. Надо бы просто пофиксить это в движке.

96. И еще: при хите движок криво считает кости. Из-за этого нельзя сделать например подсчет хедшотов. Пометь себе, может потом когда глянешь. Но там также есть проблема с buck_shot > 1 - для дроби. Тогда идет сразу несколько хитов. Тут как считать от какого погиб - не знаю. Тогда навреное в деф калбек передавать, от какой кости помер) Вобщем пока повесь себе этот вопрос, потом займемся)

Что нужно изменить вообще:
6. Пофиксить рандомный непоказ СМС на широкоформатном экране.

8. Грузить визуалы не при лоаде или спавне, а при изменении parent на 65535. То есть при спавне в инвентарь визуал не грузим вообще. 
А также на лоаде контролируем парент. И учесть что у неписей best_weapon должен иметь подгруженный визуал, они его держат в руках. 
Либо также подгружать его при необходимости. Это существенно ускорит загрузку игры,особенно где много объектов. Сейчас грузятся все визуалы независимо от парента.

9. Чтение ини: сделать просто возврат строки кастомдаты, если нет файла, и сделать её чтение end ... end по аналоги  с алспауном, 
в таком же формате. Это позволит убрать все кастомдаты из нескольких тысяч отдельных файлов в конфиги. 
Станет гораздо удобнее) Перенос я сделаю сам. Вернее скрипт забабахаем, который это сделает)

12. Статьи в пда, а также диалоги не удаляются при лоаде. Только перезапуск игры. И копится мусор в памяти. Пофиксить бы это)

13. Может что ещё не удаляется при лоаде...
14. При открытии вкладок пда указанные в справочнике на амк и в info_portions поршни не выдаются корректно так, как написано. Тоже это пофиксить бы)
15. Сделать калбек на выстрел движковый. Это будет лучше всего. Полетела пуля - калбек. Только для гг 
16. Хит калбек актору сделать. Аналогично при получении любого хита. Думаю пригодится для анимаций разных и статистики. параметры аналогично хиту сталкера.
17. Экпортировать будешь функции для отображения иконок вместо текста в новых рюкзаках?
18. если неправильный закрывающий тэг в хмл, то движок вылетает просто с фразой error reading end tag, но имя файла, в котором это - не указывается. Надо бы в лог ошибки добавить вывод имени файла.
18. Вылет по invalid vertex for object (глянь шапку вылетов на форуме) - это из-за чего? Можно как-то его пофиксить? Например, подставляя какой вертекс? 
19. Аналогочно для путей any vertex in patrol path "объект_1" in inaccessible for object "объект_2/ Здесь можно что сделать?
20. there is no specified level in the game graph - и это глянь тоже плиз)
21. Нужно пофиксить рандомный невывод СМС на широкоформатных разрешениях. Глюк движковый.
22. Провал артефактов и предметов под текстуры. Пофиксить можно? Или это из-за косяков локи?
23. Возьми В РУКИ Выхлоп, подойди ВПЛОТНУЮ к неписю и ВЫБРОСИ ствол. Он окажется не на земле, а в инвентаре непися (!) Это НУЖНО пофиксить тоже)
24. При скриптовом спавне с присвоением стори ид стори ид не прописывается сразу в регистре. Нужно сделать СЛ. Пофиксить бы.
26. При наличии в рюкзаке большого количества разных предметов II_DOC падает ФПС. Акилл больше знает об этом, с картами Кузнецова такое. Пришлось им класс на II_ATTCH сменить. С другими классами  такого нет - только II_DOC. Пофиксить бы.
27. Если сделать СЛ рядом с контриком, когда он поет своей аурой, то пение не сбрасывается, пока не выйдешь из игры. Тоже бы пофиксить)
28. Да, и по звукам. Надо бы в перспективе получить список всех звуков с кривым заголовком и перегнать нормально через СДК. Кому перегонять - есть, список только нужен) Можно будет написать в движке небольшой скриптик, который бы перебрал ВСЕ звуки из CLocatorAPI на открытие и проверку заголовка с выводом в лог кривых. Разовая такая утилитка) И все)
29. шейдеры на каллиматоры
31. Вот смотри: имею такой лог:

Scheduler tried to update object krot_afterparty212900

Завис здесь происходит при обработке grenade_rgd5_fake, у которой я по ошибке сменил класс. А вот можно как-то добавить в лог еще и на каком объекте сломалось?) Пусть не везде, но может хот где-то?) Сейчас занисаюсь чисткой конфигов оружия и ловлю подобные уникальные вылеты) И раньше ловил подобное. просто дополнительная информация в логе очень сильно облегчит жизнь)
32. Еще имел вот такой вылет:

sv reject. id_parent [11926][krot_afterparty2:krot_afterparty211926] id_entity [14690][gl_test_shell_ammo_vog-25p:gl_test_shell_ammo_vog-25p14690] [21441]

ahtung !!! [21442]

CInventory::DropItem pIItem->m_pCurrentInventory!=this

this = [11926]

stack trace:

 

0023:0587476C xrGame.dll

 

Вот можно в CInventory::DropItem pIItem->m_pCurrentInventory!=this добавить секцию и ид объекта?

33. Для ситуаций выше общая задача: Можно ли поиском собрать все сообщения об ошибке в движке и там, где НЕТ параметров в тексте - ДОБАВИТЬ ИХ, насколько возможно? Секция и ид объекта будет самое то. Что выше - частный случай. По инвентраю вылеты прочти все без объектов, только ссыль на функцию. Вернее тут даже не вылет а просто крэш. Лога нет внятного. Можно тут что-нибудь сделать?)

35. Когда я чистил конфиги мультиплеера, не удалось отключить 

#include "mp\weapons_mp\ammo_mp.ltx"

#include "mp\weapons_mp\weapons_mp.ltx"

#include "mp\mp_ranks.ltx"

про последний я тебе сказал, из первых двух иногда брались секции. Они там с приставкой "mp_". Были рандомные вылеты can't find section. Тоже выкинуть бы это все за ненадобностью если возможно)

36. Я к чему: может при спавне арта прописать в движок некое фиксированное увеличение позиции Y? Чтобы арт спавнился гарантированно над землей и просто опускался на jump_height? Почему счваренный арт проваливается иногда под землю на уклонах? А на ровной прверхности - практически нет? Посмотри что тут можно сделать)
35: Еще такой момент: А можно продублировать чтение из конфигов всех тех парметров, какие при спавне вычитывает движок из алспауна. Чтобы я мог в конфиге написать:

 

[agr_stalker_regular]:stalker

character_profile = agr_stalker_general

spec_rank = experienced

community = stalker

story_id = 12345

direction = 0.916156470775604,0,0.400820851325989

name = xalyava_naem1

upd:health = 3

...

Это решило бы многие проблемы при спавне. Просто ВСЕ ТЕ ЖЕ что и из алспауна. Может, как-то эту функцию можно вызвать для скриптового спавна вместо той, что сейчас есть?

36. Класс WP_RG6. Самый глючный из всех. Главная проблема, что можно сделать выстрел их пустого ствола. Зарядов не осталось, но продолжая нажимать на "Огонь"  идет звук и картинка когда грена взрывается. Но самой анимации вылета грены нет. Пофикси хотя бы это. И можешь спросить у Димы, что тут еще надо. Может, включить ему возможность стрелять очередями?)) должен прикольный ствол получиться при таком варианте) Спроси у Димы, что тут можно по мелочи сделать.
38. Еще в движке сделай string.trim, ltrim, rtrim для удаления пробелов.
38. Если отсутствует ил ошибка в ЛЮБОЙ функции, которая вызывается  ЛЮБЫМИ тегами диалогов - то вылет без лога. Надо бы сделать тут нормальный вылет с сообщением об ошибке. Аналогично глянь и для поршней, тасков и прочего, где вызывается скрипт по строке.
37. По защитам, которую дают объекты объектов: вот смотри как они задаются:
Для артов:
hit_absorbation_sect = af_dummy_spring_absorbation
[af_dummy_spring_absorbation]
burn_immunity = 1.0
strike_immunity = 0.9
shock_immunity = 1.0
wound_immunity = 1.0
radiation_immunity = 1.0
telepatic_immunity = 1.0
chemical_burn_immunity = 1.0
explosion_immunity = 1.0
fire_wound_immunity  = 1.0
 
по остальному:
immunities_sect = sect_fire_outfit_immunities
[sect_fire_outfit_immunities]
burn_immunity = 0.04
strike_immunity      = 0.01
shock_immunity = 0.01
wound_immunity = 0.01
radiation_immunity = 0.00
telepatic_immunity = 0.00
chemical_burn_immunity      = 0.02
explosion_immunity = 0.01
fire_wound_immunity = 0.015
 
То есть просто написать в конфиге объекта:
burn_immunity = 0.04
- нельзя. не работает. обязательно надо городить секцию.
 
Более того, для outfit защита, которую он дает владельцу, задается в самом конфиге:
burn_protection = 0.35
strike_protection      = 0.40
shock_protection = 0.35
wound_protection = 0.45
radiation_protection = 0.15
telepatic_protection = 0.0
chemical_burn_protection = 0.3
explosion_protection = 0.45
fire_wound_protection   = 0.50
 
А вот иммунитеты - только через секцию
 
Можно ли сделать двойное чтение. То есть читаем иммунитеты напрямую из секции. если они не заданы - то читаем из 
immunities_sect или hit_absorbation_sect  и крешимся как обычно, если их нет. Это ОЧЕНЬ сильно сократило бы конфиги. ибо там 70% одного и того же. А по большинству объектов они просто заглушены через identity_immunities. Как дойдешь сюда, напиши, тут еще посовещаться нужно будет, как лучше. Может вообще от секции отказаться, оставить ТОЛЬКО из конфига.

39. Формула расчета защиты гг броником, написанная в описании ОП-2, не работает. Какой бы костюм гг не надел, защиты для него нет никакой. Починить бы это. В ОГСЕ и лост альфа это исправлено.
Плюс у уник костюмов как лечебный берилл, восстанавливающий здоровье, не работают эти параметры.

40. У артов не работают некоторые свойства. Тот же параметр, который ты писал закомментен, сытости от артов.

39. дополнение. 
Вот я бы это наоборот НЕ ПРАВИЛ. ВООБЩЕ НЕ ТРОГАЛ БЫ. Иначе поплывет весь боевой баланс, который мы так долго настраивали. Народ привык уже, все отлажено, думаю не нужно это. А остальное - да, было бы неплохо.

42. Вылет there is no specified level in the game graph. Он происходит, когда движок почему-то получает level_id, который отстутствует в графе игры, id в game_levels.ltx. Например, бывают значения 143, 98, 106 и т.д. Вот откуда они такие берутся? Можешь глянуть? Вылет происходит, когда заспавненные СКРИПТОМ, без логики монстры и неписи идут к своим работам через ползоны. Как они доберутся, - вылеты проходят. Вылет обычно, когда этот монстр переходит в онлайн рядом с гг. Если обойти это место, где вылетает - то вылета не будет.
43. В окне торговли, схронов из ТЧ чтоб лифт прокрутки не сбрасывался наверх, а оставался в том положении, в которое поставил игрок.

45. Твои правки автопаузы не работают на старом двжике. Глухой завис без лога. Вернул старый вариант. Пометь себе, разобраться потом. И я еще раз предлагаю отказаться от варварства под названием inj и НОРМАЛЬНО прописать все функции в калбеки, как это должно быть.
46. Думал я, думал и решал) давай вот эту проверку
47.И пожелалка - сделать для дист атаки возможность прописывать в конфиг бюрера hit_type_2  = тут выбираем тип урона по гг. Это я хотел бы для разнообразных типов монстров, как огненные, электрические и прочие монстры.

У класса ножа, например, две типа атаки прописаны в конфиг.

hit_type     = wound

hit_type_2 = wound

  if se_obj then

    alife():release(se_obj, true)

  end
47. Предлагаю на перспективу сделать вот что, что еще ЗНАЧИТЕЛЬНО уменьшит объем конфигов:

[mushroom]:II_FOOD
inv_name         = "Мухомор"
inv_name_short         = "Мухомор"
description = "Мухомор. Съедобен, слегка радиоактивен."
 

description
вычитывать "если есть". И по дефолту, есть нет, подставлять соответственно:
mushroom
mushroom_s
mushroom_d
то есть читаемую секцию с суффиксами. Тогда все эти теги можно просто выкинуть или не использовать, называя нужными именами string_id.

 
48. inv_name_short это строка, которая показывается на худе в углу, сокращенное name. Это вообще нужно только для патронов, ножей, болта и гранаты. 
Поэтому его заменить на чтение если есть, можно уже сейчас. По дефолту возвращай пустую строку.

 
49.  inv_name_short не работает для гранат. Не показывается на худе. Надо бы пофиксить.

 

51 Раз пошла такая пьянка, то может отдельные слоты выделим для детекторов? Дозиметр, детектор артефактов/изоморфов, все это работает с пояса. Может слоты для артефактов оставим для артефактов?) А приборы пусть ставятся в отведенное для них место, как и должно быть.
Фотоаппарат, ПНВ тоже выделить для них слоты? 

51. script_binding = bind_stalker.actor_init

Если в биндере синтаксическая ошибка, то ничего не происходит, просто объект не биндится и все. Здесь надо убрать проверку на nil и сделать чтобы ВСЕГДА вылетало, как при любой другой ошибке.

52 Подумайте, как сделать, чтобы игра могла читать нормальные видео файлы. То, что сейчас - извращение и жесть. Если получится то это позволит провести хорошую оптимизацию. Я сам собираюсь ее делать, но проблему с видео надо тоже решать. Желательно сделать так чтобы игра воспринимала формат mkv. Нужно сделать так, чтобы видеофайлы читались из папки. Тогда будет достаточно задать в скрипте имя файла и путь к нему. Именно формат MKV нужен потому что он на данный момент является самым оптимизированным. 
51. function_complete в тасках, и аналогичные ей функции - как часто они апдейтятся в движке? Можно их все сделать раз в секунду? Дело в том что по большинству тасков контролируется наличие у гг определенных предметов. Я вчера переделал полностью inventory.script сделав его синглетоном и добавил туда кеш инвентаря гг. То есть если нужно просто количество - то идет чтение из таблицы - ничего не итеритуется. А вот если нужно контролировать износ - то тут так не сделать, ибо износ меняется в процессе. Поэтому если нужен исправный предмет - то будем итерировать. И итерировать достаточно раз в секунду. Может даже раз в 2 секунды. Но 1 сек - самое то. Можно это сделать?
Я все have_item, item_much relocate_item и прочее повыкидваю и оставлю единые функции для работы с инвентарем гг:
has, got, lost.
Так что в скрипте все будет по фен-шую. В движке бы тоже также сделать)

54. Еще по инвентарю: Надо сделать нормально в движке таблицу предметов на поясе и экспортировать ее. Чтобы убрать текущие костыли с сепаратором. Пусть это будет функция db.actor:belt() параметр ид или секция. и возврат true и false. и чтобы по ней можно было итерировать при необходимости.


57. При лоаде не сбрасываются запущенные звуки. Продолжают играть и нужно перезапускать игру. Как пение контрика. Надо бы это пофиксить - глушить все звуки при очистке уровня перед лоадом.
58. При запуске game.start_tutorial запоминай состояние курсора и убирай его с экрана. Потом восстанавливай. level.hide_indicators нельзя использовать, ибо тогда прерывается диалог с неписем и закрывается инвентарь. а надо просто убрать курсор)
59. Вот вспомнил еще: имя игрока прописывается в реестре при установке ТЧ. Но движок при первом старте почему-то заменяет его на имя пользователя винды. Надо бы пофиксить. Чтобы именные СМС были по настоящему именными)

60. ini:r_string(section, value, default) причем, если default == nil то значение ОБЯЗАТЕЛЬНО ДОЛЖНО БЫТЬ! Иначе - вылет. Как mandatory для пысовских функций cfg_get... Даже писал скриптовую обертку, но она глючила, выкинул)
 
то есть если default == nil - просто читаем без проверок и крешимся при остутствии. Иначе - все необходимые проверки
section exists, line exists else default. 

61. И уж до кучи: перенеси в движок аналоги iterate_ini_lines. И еще надо бы добавить sections_count и r_section по номеру. Чтобы можно было перебрать все секции в файле аналогично строкам. И аналогично добавить iterate_ini_sections. По мне это необходимый минимум)

63. звуки, запущенные через say() - не останавливаются при лоаде. Нужно перезарускать игру. Надо всегда останавливать ВСЕ звуки при лоаде.

67. Андрей, сделал бы ты правку по spawn_ini()  для сталкеров, из-за которой не удалось объединить смарт и респаун в одной секции. Это заметно упростило бы заселение новых лок) Для монстров все работает, как я понял, надо только для сталкеров)
68. А можно движок вообще отвязать от реестра? Полностью. Чего намт туда писать? Имя игрока? Паша сделает, чтобы оно писалось в опциях и на ходу его можно будет менять. Пути? есть fs_game... Версия... тоже не надо. Тогда я сделаю простой инсталлятор с нуля все в одном. Чтобы не ставить сначала ТЧ, потом апдейты потом оп... Просто ставим ОП-2.1)
69. Выведи в actor.drunk состояние опьянения. Может, пригодится) и в actor.hunger - голод
70. Сделай навреное крэш при попытке записать за пределы нетпакета. И лог типа такой-то объект попытка записи за пределы нетпакета. И аналогично сделать бы при попытке чтения за пределы нетпакета. Чтобы не гадать, почему зависло наглухо или не работает как надо.
71. Андрей, Валентин пишет:
 
При старте НИ движок сверяет айди в спавне с айди в графе, и если они не совпадают - вылет. Но как он сравнивает я не знаю, потому что в заголовке графа написано вообще другое:
 
[header]
version = 8
vertex_count = 9955
edge_count = 25056
level_point_count = 1292531
guid = 110,148,210,152,55,68,150,72,185,154,60,146,206,111,91,210
level_count = 58
 
В файле all есть такие строки:
guid = 36e7aca183294546b92b11b383be1c17
graph_guid = 6e94d29837449648b99a3c92ce6f5bd2
Вот они меняются при пересборке графа через сдк. По идее, спавн тоже надо собирать в сдк, но это сложно и не нужно, да и вылетает, а исправлять я не хочу, желания такого нет.
Сейчас айди такие:
guid = af995e8fead9c3419088605976a11f6e
graph_guid = 5b966cbe4d600b48b4918ad9b6c210a4
Откуда их брать - я не знаю, в графе вообще по другому написано. Я обошел вылет, создав в сдк спавн почти пустой, потом распаковал его и забрал актуальные айди.
 
Ты можешь глянуть, они пишутся в сейв? Где они контролируются при лоаде? Можно ли этот контроль отключить? Валентин правит только аи сетку, вертексы не меняются, следовательно и координаты мобов не меняются. Может, можно выкинуть эту проверку? Тогда получится править аи сетку без необходимости НИ. Сейчас при загрузке старых сейвов мы имеем такой лог:
 
FATAL ERROR
 
[error]Expression    : !save_guid || (*save_guid == header().guid())
[error]Function      : CALifeSpawnRegistry::load
[error]File          : E:\stalker\sources\trunk\xr_3da\xrGame\alife_spawn_registry.cpp
[error]Line          : 124
[error]Description   : Saved game doesn't correspond to the spawn : DELETE SAVED GAME!
 
 
stack trace. 

Андрей, вот что мне Дима написал:
Володя, а ты не думал о движковой защите 2.1, коли уж движок с Винзором расковыряли? Ведь есть же облегченное прохождение мода и большой нужды в каких-либо сторонних правках нет. Зато "умоем" амкашных ковыряльщиков, чтобы своими грязными ручонками во внутренностях мода не ковырялись. Движкоправов там нет, а те, кто есть им до фени бредовые амбиции солянщиков. 
Опять же стволы не будут растаскивать по своим модам. Не редко вижу в других модах наши с Александрычем стволы, но в ридми ничего не сказано про авторство.
 
Давай защиту сделаем на распаковку игровых архивов какую-нибудь, а?
 
Как в НЛС7 сделано?

 72. Очень было бы удобно сделать возможность ЗАПИСИ в system_ini() на ходу, через скрипты. простым присвоением значений. Тоже на время теста. Ибо это ж сколько времени уходит, в частности у Димы на настройку стволов.... после каждой правки вообще ПЕРЕЗАПУСКАТЬ игру. А вот если бы на ходу - исправил цифру в худе например, и она сразу работает новая. Было бы просто здорово! Из релиза эту фичу убрать.

75. Андрей, очень надо добить смарт+респанер, что мы говорили, но для неписей. Чтобы не бродили по всей Зоне. Иначе задолбаемся заселять. Ибо из респанера в катакомбах попрется на АТП через всю зону... Для монстров все есть - хоть счас переписывай алспаун на новое, а вот для неписей...
76. Или, а лучше "И" сделать так, чтобы выбирал ближайшую работу по расстоянию а не как попало. То есть либо на этой же локе, либо через минимальное число аи переходов. Хотя это навреное геморно...
77. При смене движка - перименовании папки bin с ТЧ на ОП не вычитываются расширенные настройки видео. ставятся по умолчанию. После выставления снова уже сохраняются. Какой-то баг?

85. Такой вопрос: квиклоад у ДН у меня прошел за 42 сек. также как и на старом. Но: почти 4 секунды происходит удаление текущего состояния. То есть окно загрузки появляется через 4 сек после нажания F9. Можно ли что-нить тут оптимизировать? Я так понимаю движок удаляет все элементы по одному. Но ведь ломать не строить) Ведь можно просто скинуть всю область памяти текущего сеанса, кроме загруженного уровня в нил и все) Или нет? И аналогично при смене уровня - скидывать область уровня в нил. Можно тут что ускорить?


И вот еще полезная штука - исправление мешей динамических моделей, посмотрите скрины - надо внедрять. http://www.gameru.net/forum/index.php?showtopic=55777&st=3560&p=1553203&#entry1553203

И вот: http://imasters.org.ru/viewtopic.php?id=321
Починен ЕАХ в ТЧ
 
И вообще, вот всё вместе: http://xray-engine.org/index.php?title=%D0%97%D0%B0%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0